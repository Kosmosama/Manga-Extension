<div class="manga-card">
    <img [src]="isImageValid() ? manga().image : fallbackImage()"
        [attr.alt]="isImageValid() ? manga().title : ('accessibility.image.altFallback' | transloco)"
        (error)="imageNotFound()" loading="lazy" class="manga-cover" />

    <div class="manga-info">
        <h2>{{ manga().title }}</h2>
        <p>{{ 'manga.card.chapters' | transloco }}: {{ manga().chapters }}</p>
        <p>{{ 'manga.card.updated' | transloco }}: {{ manga().updatedAt }}</p>

        @if (manga().resolvedTags?.length) {
        <div class="tag-badges">
            @for (tag of manga().resolvedTags; track tag.id) {
            <span class="tag-badge" [style.background]="tag.color">{{ tag.name }}</span>
            }
        </div>
        }

        <div class="actions">
            <button (click)="updateChapters(-1)" [disabled]="saving() || manga().chapters <= 0"
                aria-label="- {{ 'manga.card.chapters' | transloco }}">-</button>
            <button (click)="updateChapters(1)" [disabled]="saving()"
                aria-label="+ {{ 'manga.card.chapters' | transloco }}">+</button>
            <button (click)="toggleFavorite()" [class.favorited]="manga().isFavorite"
                [attr.aria-label]="manga().isFavorite ? ('actions.unfavorite' | transloco) : ('actions.favorite' | transloco)">
                {{ manga().isFavorite ? 'â˜…' : 'â˜†' }}
            </button>
            <button (click)="deleteManga()" aria-label="{{ 'common.delete' | transloco }}">ğŸ—‘ï¸</button>
        </div>

        <button (click)="editManga()" aria-label="{{ 'common.edit' | transloco }}">{{ 'common.edit' | transloco
            }}</button>
    </div>
</div>