<div>
    <header>
        <h1>{{ 'manga.list.title' | transloco }}</h1>
    </header>

    <div class="toolbar">
        <form (submit)="$event.preventDefault()">
            <input [value]="searchQuery() || ''" (input)="onSearchInput($any($event.target)?.value)"
                [placeholder]="'manga.search.placeholder' | transloco" />
            <button type="button" (click)="clearSearch()" [title]="'common.clear' | transloco">Ã—</button>
        </form>

        <button (click)="toggleSort()"
            [title]="(sortOrder() === 'asc' ? 'manga.sort.asc' : 'manga.sort.desc') | transloco">
            {{ (sortOrder() === 'asc' ? 'manga.sort.asc' : 'manga.sort.desc') | transloco }}
        </button>
    </div>

    <tag-filter-bar (filterChanged)="onFilterChanged($event)"></tag-filter-bar>
</div>

<main>
    <div class="manga-list">
        @if (filteredMangas().length) {
        @for (manga of filteredMangas(); track manga.id) {
        <manga-card [handleEdit]="handleEdit" [manga]="manga" (deleted)="handleMangaDeletion($event)"></manga-card>
        }
        } @else {
        <div class="empty">{{ 'manga.list.empty' | transloco }}</div>
        }
    </div>
</main>

<footer>
    <button (click)="openForm()">{{ 'manga.actions.add' | transloco }}</button>
</footer>

<modal #modal>
    <manga-form [manga]="selectedManga()" (formSumbitted)="handleFormSumbission($event)"></manga-form>
</modal>

<modal #editModal>
    <manga-form [manga]="selectedManga()" (formSumbitted)="handleFormSumbission($event)"></manga-form>
</modal>